<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="UTF-8">
	<title>SEARCH</title>
	<script src="js/http_code.jquery.com_jquery-2.1.3.js"></script>
	<link rel="stylesheet" href="css/uikit.min.css" />
	<script src="js/uikit.min.js"></script>
</head>
<body>
<input type="text" id="keyword" onclick="search()"/> <input type="button" value="Send" onclick="search()"/>
<select id="limit" onchange="search()">
	<option value="10">10</option>
	<option value="15">15</option>
	<option value="20" selected>20</option>
</select>
<p id="test"></p>
<script>
	function search()
	{
		var keyword=document.getElementById('keyword').value;
		var limit = document.getElementById('limit').value,
			pages = (document.getElementById('pages'))?document.getElementById('pages').value:1;
		if (keyword.length > 1)
		{
			console.info('limit ',limit, ' pages ', pages);
			$.get("query.php", {action:"search", key:keyword, lmt:limit, pg:pages}, function(xhr)
			{
				if(xhr)
				{
					console.log(xhr);
					if(xhr.success)
					{
						var i, item, tmp_str="", tmp_pages=Math.ceil(xhr.total/limit);
						tmp_str += "search result : " + xhr.total + "<br/>";
						
						if(xhr.yi18.length)
						{
							tmp_str += "total pages : " + tmp_pages + "<br/>";
							
							if(tmp_pages > 1)
							{
								tmp_str+="<select id=\"pages\" onchange=\"search()\">";
								for(i=1; i<=tmp_pages; i++)
								{
									tmp_str+="<option value=\""+i+"\">page "+i+"</option>";
								}
								tmp_str+="</select><br/><br/>"
							}
							for(i=0; i<xhr.yi18.length; i++)
							{
								item=xhr.yi18[i];
//								tmp_str+="<img src='http://www.yi18.net/"+item.img+"'/>";
								tmp_str+=item.name;
								tmp_str+=" | type: "+item.type+" | id : "+item.id;
								tmp_str+="<br/>";
								tmp_str+="keywords: "+item.keywords;
								tmp_str+="<br/>";
								tmp_str+="description: "+item.description;
								tmp_str+="<br/>";
								tmp_str+="content: "+item.content;
								tmp_str+="<br/>";
								tmp_str+="<br/>";
							}
							document.getElementById('test').innerHTML=tmp_str;
						}
					}
				}
			}, "json")
		}
	}
</script>
</body>
</html>